<!DOCTYPE html>
<html>

<head>
	<title>Weebstopia</title>
	<link rel="icon" type="image/ico" href="../favicon.ico">
	<meta name="viewport" content="width=device-width,minimum-scale=1.0,initial-scale=1,user-scalable=yes">
	<script src="../script.js"></script>
	<link rel="stylesheet" href="../style.css">
	<link rel="stylesheet" href="../bootstrap-social.css">
	<link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/pretty-checkbox@3.0/dist/pretty-checkbox.min.css">
	<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">
	<link rel="stylesheet" href="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/css/bootstrap.min.css"
		integrity="sha384-Vkoo8x4CGsO3+Hhxv8T/Q5PaXtkKtu6ug5TOeNV6gBiFeWPGFN9MuhOf23Q9Ifjh" crossorigin="anonymous">
	<style>
		.flex-container {
			display: flex;
			color: rgba(99, 95, 95, 0.911);
		}

		.flex-container>hr {
			width: 100%;
			margin: 10px;
			font-size: 30px;
		}
	</style>
</head>

<body>
	<div id="app" style="background-image: url('../wallpaper.jpg');">
		<div class="_452c3ec4 d68c66a8">
			<div class="_75ce47e7">
				<main>
					<header>
						<a href="/">
							<img src="../logo-big.png" alt="Weebstopia" width="100" height="100">
						</a>
					</header>
					<div class="_94d452dc">
						<section class="_2b1f4808 bg-white br3">
							<div>
								<form method="POST" action="/save-user" class="ma0" name="f1">
									<h2 class="aa630ec5 f3 fw6 pb3 pt0 mt0 mb3 black-70 b--black-10 bb">Sign up</h2>
									<% if(message) {%>
									<div class="alert alert-<%= bg %>  alert-dismissible fade show" role="alert">
										<%= message %>
										<button type="button" class="close" data-dismiss="alert" aria-label="Close">
											<span aria-hidden="true">&times;</span>
										</button>
									</div>
									<% } %>
									<div>
										<label class="db mt1 mb2 f5 fw6 black-70 nowrap " for="signup_fullname">
											Full Name
										</label>
										<input type="text"
											class="_425fdea4 relative w-100 ma2 ml0 pv3 pl2 pr2 br2 black-70 ba b--black-10  "
											name="fullName" value="" autofocus required>
									</div>
									<div>
										<label class="db mt1 mb2 f5 fw6 black-70 nowrap " for="signup_email">
											Email
										</label>
										<input type="email" data-toggle="tooltip" data-placement="bottom"
											data-html="true"
											title="Email Already Taken Or Invalid"
											class="_425fdea4 relative w-100 ma2 ml0 pv3 pl2 pr2 br2 black-70 ba b--black-10  "
											id="em" name="email" value="" required autocomplete="off">
									</div>
									<div>
										<label class="db mt1 mb2 f5 fw6 black-70 nowrap " for="signup_name">
											User Name
										</label>
										<input id="um" type="text" data-toggle="tooltip" data-placement="bottom"
											title="UserName Not Already Exists"
											class="_425fdea4 relative w-100 ma2 ml0 pv3 pl2 pr2 br2 black-70 ba b--black-10  "
											name="userName" pattern="[a-zA-Z0-9]+"
											title="Only alpha-numeric character are allowed!" value="" required
											autocomplete="off">
									</div>
									<div>
										<label class="db mt1 mb2 f5 fw6 black-70 nowrap " for="signup_password">
											Password
										</label>
										<input type="password" minlength="5"
											title="Passwords should be longer than 5 characters!"
											class="_425fdea4 relative w-100 ma2 ml0 pv3 pl2 pr2 br2 black-70 ba b--black-10  "
											name="password" value="" required>
									</div><br>
									<div class="pretty p-icon p-round p-pulse p-has-hover">
										<input type="checkbox" value="true" name="remember">
										<div class="state p-primary">
											<i class="icon fa fa-check"></i>
											<label class="mt3  mb3 f5 fw6 black-70 " for="remember_me">
												Remember me
											</label>
										</div>
										<div class="state p-primary p-is-hover">
											<i class="icon fa fa-check"></i>
											<label class="mt3  mb3 f5 fw6 black-70 ">Remembered for 5 days</label>
										</div>
									</div><br><br>
									<div>
										<p class="_77b93cf4 black-80 lh-copy">
											<span class="_0bb7ba4f fw6 black-70">Make sure your:</span>
										</p>
										<ul class="dd5d12f9 mt3 mb4 lh-copy black-60">
											<li>Password is longer than 5 characters</li>
											<li>User name contains only alpha-numeric characters</li>
										</ul>
									</div>
									<button type="submit"
										class="_24a1e9c7 dab9924c br2 pv2 ph3 fw5 f5 tc button button-reset pointer ma2 truncate ml0 no-underline e64d5a00 w-100">Sign
										up
									</button>
								</form>
								<div class="flex-container">
									<hr>
									<span>Or</span>
									<hr>
								</div><br>
								<a class="btn btn-block btn-social btn-google"
									style="color:white;width:30%;margin:auto;" href="/auth/google/">
									<span class="fa fa-google"></span>Google
								</a>
								<a href="/log-in"
									class="_6126477b db center tc mt3 mb2 f5 fw6 black-50 hover-black-80">Login
								</a>
							</div>
						</section>
					</div>
				</main>
			</div>
		</div>
	</div>
	<script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
	<script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.0/dist/umd/popper.min.js"
		integrity="sha384-Q6E9RHvbIyZFJoft+2mJbHaEWldlvI9IOYy5n3zV9zzTtmI3UksdQRVvoxMfooAo" crossorigin="anonymous">
	</script>
	<script src="https://stackpath.bootstrapcdn.com/bootstrap/4.4.1/js/bootstrap.min.js"
		integrity="sha384-wfSDF2E50Y2D1uUdj0O3uMBJnjuUD4Ih7YwaYd1iqfktj0Uod8GCExl3Og8ifwB6" crossorigin="anonymous">
	</script>

	<script>
		function ValidateEmail(mail) {
			if (/^\w+([\.-]?\w+)*@\w+([\.-]?\w+)*(\.\w{2,3})+$/.test(mail)) {
				return (true)
			}
			return (false)
		}

		$(document).ready(function () {
			$('#em').tooltip({
				trigger: 'focus'
			});
			$('#um').tooltip({
				trigger: 'focus'
			});
		});
		$("#em").keyup(async function () {
			if(ValidateEmail($('#em').val()))
			await $.post("/checkEmail", {
				email: $('#em').val()
			}, function (data, status) {
				$("#em").tooltip('hide')
					.attr('data-original-title', data)
					.tooltip('show');
				console.log(data);
			});
			else
			$("#em").tooltip('hide')
					.attr('data-original-title', "Email Already Taken Or Invalid")
					.tooltip('show');
		});
		$("#um").keyup(async function () {
			await $.post("/checkUserName", {
				userName: $('#um').val()
			}, function (data, status) {
				$("#um").tooltip('hide')
					.attr('data-original-title', data)
					.tooltip('show');
				console.log(data);
			});
		});
	</script>
</body>

</html>